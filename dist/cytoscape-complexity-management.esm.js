import{ComplexityManager as e}from"cmgm";function o(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=Array(o);t<o;t++)n[t]=e[t];return n}function t(e,o,t){return(o=function(e){var o=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,o||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==typeof o?o:o+""}(o))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function n(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?n(Object(a),!0).forEach((function(o){t(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function i(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,o){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i,r,l=[],d=!0,s=!1;try{if(i=(t=t.call(e)).next,0===o){if(Object(t)!==t)return;d=!1}else for(;!(d=(n=i.call(t)).done)&&(l.push(n.value),l.length!==o);d=!0);}catch(e){s=!0,a=e}finally{try{if(!d&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,o)||d(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(o){var t=function(e,o){for(var n=e.length,a=0;a<n;a++){var i=e[a],r=i.children();o.addNode(i.id(),i.parent().id()),null!=r&&r.length>0&&t(r,o)}},n=new e,l=o.nodes(),d=o.edges();t(function(e){var o={};return e.forEach((function(e){o[e.id()]=!0})),e.filter((function(e,t){"number"==typeof e&&(e=t);for(var n=e.parent()[0];null!=n;){if(o[n.id()])return!1;n=n.parent()[0]}return!0}))}(l),n),function(e,o){for(var t=0;t<e.length;t++){var n=e[t];o.addEdge(n.id(),n.source().id(),n.target().id())}}(d,n);var s=[],c=function(){s.forEach((function(e){if(n.visibleGraphManager.nodesMap.get(e.parent().id())){e.isNode()&&n.addNode(e.id(),e.parent().id());var o=s.indexOf(e);o>-1&&s.splice(o,1),b()}}))},u=function(e){var o=e.target;o.parent().id()?n.visibleGraphManager.nodesMap.get(o.parent().id())?(o.isNode()&&n.addNode(o.id(),o.parent().id()),b()):s.push(o):(o.isNode()?n.addNode(o.id(),o.parent().id()):(c(),n.addEdge(o.id(),o.source().id(),o.target().id())),b());c()},p=function(e){var o=e.target;o.isNode()?n.removeNode(o.id()):n.removeEdge(o.id()),b()};o.on("add",u),o.on("remove",p),o.on("move","edge",(function(e){var o=e.target;n.reconnect(o.id(),o.source().id(),o.target().id()),b()})),o.on("move","node",(function(e){var o=e.target;n.changeParent(o.id(),o.parent().id()),b()}));var f=new Set,y=function(){return o.scratch("cyComplexityManagement").options.filterRule},h=function(e,o){return new Set(r(e).filter((function(e){return!o.has(e)})))};function m(e,o){var t=o.collection();e.forEach((function(e){t.merge(o.getElementById(e))})),o.off("remove",p),o.remove(t).forEach((function(e){o.scratch("cyComplexityManagement").removedEles.set(e.id(),e)})),o.on("remove",p)}function g(e,o){return o.getElementById(e.data().parent).data()?o.getElementById(e.data().parent):e.parent().id()?g(e.parent(),o):void 0}function v(e,o){var t=o.collection(),n=o.collection();e.forEach((function(e){var a=o.scratch("cyComplexityManagement").removedEles.get(e);a&&(a.isNode()?t.merge(a):n.merge(a))})),o.off("add",u),t.forEach((function(e){var t,n,a,i,r,l,d=cyInvisible.getElementById(e.id());if(d.id()){var s=cyInvisible.getElementById(d.data().parent),c=g(d,o);if(c&&(c.id()!=s.id()&&(s=cyInvisible.getElementById(c.id())),c.position()&&e.isChildless())){var u=(t=d.position().x,n=d.position().y,a=s.position().x,i=s.position().y,r=c.position().x,l=c.position().y,{x:t+(r-a),y:n+(l-i)});e.position(u)}}})),o.add(t.merge(n)).forEach((function(e){o.scratch("cyComplexityManagement").removedEles.delete(e.id())})),o.on("add",u)}function x(e,o){o.off("add",u),e.forEach((function(e){try{o.add({group:"edges",data:{id:e.ID,source:e.sourceID,target:e.targetID,size:e.size,compound:e.compound}})}catch(e){}})),o.on("add",u)}function b(){var e=y(),t=new Set;o.elements().forEach((function(o){e(o)&&t.add(o.id())})),o.scratch("cyComplexityManagement").removedEles.forEach((function(o){e(o)&&t.add(o.id())}));var a=h(f,t);a.forEach((function(e){f.delete(e)}));var r=h(t,f);r.forEach((function(e){f.add(e)}));var l=[],d=[],s=[],c=[];r.forEach((function(e){o.getElementById(e).length>0&&o.getElementById(e).isNode()||o.scratch("cyComplexityManagement").removedEles.has(e)&&o.scratch("cyComplexityManagement").removedEles.get(e).isNode()?l.push(e):d.push(e)})),a.forEach((function(e){var t;null!==(t=o.scratch("cyComplexityManagement").removedEles.get(e))&&void 0!==t&&t.isNode()?s.push(e):c.push(e)}));var u=n.filter(l,d),p=i(n.unfilter(s,c),2),g=p[0],b=p[1];m(u,o),v(g,o),x(b,o)}var E={getCompMgrInstance:function(){return n},updateFilterRule:function(e){o.scratch("cyComplexityManagement").options.filterRule=e,b()},getHiddenNeighbors:function(e){var t=o.collection();return e.forEach((function(e){var a=n.getHiddenNeighbors(e.id());a.nodes.forEach((function(e){t.merge(o.scratch("cyComplexityManagement").removedEles.get(e))})),a.edges.forEach((function(e){t.merge(o.scratch("cyComplexityManagement").removedEles.get(e))}))})),t},hide:function(e){var t=[],a=[];e.forEach((function(e){e.isNode()?t.push(e.id()):a.push(e.id())})),m(n.hide(t,a),o)},show:function(e){var t=[],a=[];e.forEach((function(e){e.isNode()?t.push(e.id()):a.push(e.id())}));var r=i(n.show(t,a),2),l=r[0],d=r[1];v(l,o),x(d,o)},showAll:function(){var e=i(n.showAll(),2),t=e[0],a=e[1];v(t,o),x(a,o)},collapseNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];e.forEach((function(e){n.isCollapsible(e.id())&&(a.push(e.id()),e.data("position-before-collapse",{x:e.position().x,y:e.position().y}),e.data("size-before-collapse",{w:e.outerWidth(),h:e.outerHeight()}),e.addClass("cy-expand-collapse-collapsed-node"))}));var i=n.collapseNodes(a,t),r=[],l=[];i.nodeIDListForInvisible.forEach((function(e){r.push(e)})),i.edgeIDListForInvisible.forEach((function(e){r.push(e)})),i.metaEdgeIDListForVisible.forEach((function(e){l.push(e)})),m(r,o),x(l,o)},expandNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];e.forEach((function(e){n.isExpandable(e.id())&&(i.push(e.id()),a&&I(e.data().id,o),e.removeClass("cy-expand-collapse-collapsed-node"),e.removeData("position-before-collapse"),e.removeData("size-before-collapse"))})),setTimeout((function(){var e=n.expandNodes(i,t);v(r(e.nodeIDListForVisible),o),e.nodeIDListForVisible.forEach((function(e){var t=o.getElementById(e);n.isCollapsible(t.id())?(t.removeClass("cy-expand-collapse-collapsed-node"),t.removeData("position-before-collapse"),t.removeData("size-before-collapse")):n.isExpandable(t.id())&&(t.data("position-before-collapse",{x:t.position().x,y:t.position().y}),t.data("size-before-collapse",{w:t.outerWidth(),h:t.outerHeight()}),t.addClass("cy-expand-collapse-collapsed-node"))})),v(r(e.edgeIDListForVisible),o),m(r(e.edgeIDListToRemove),o),x(r(e.metaEdgeIDListForVisible),o)}),a?600:0)},collapseAllNodes:function(){var e=n.collapseAllNodes(),t=[],a=[];e.nodeIDListForInvisible.forEach((function(e){t.push(e)})),e.collapsedNodes.forEach((function(e){var t=o.getElementById(e);t.data("position-before-collapse",{x:t.position().x,y:t.position().y}),t.data("size-before-collapse",{w:t.outerWidth(),h:t.outerHeight()}),t.addClass("cy-expand-collapse-collapsed-node")})),e.edgeIDListForInvisible.forEach((function(e){t.push(e)})),e.metaEdgeIDListForVisible.forEach((function(e){a.push(e)})),m(t,o),x(a,o)},expandAllNodes:function(){var e=n.expandAllNodes();v(r(e.nodeIDListForVisible),o),e.expandedNodes.forEach((function(e){var t=o.getElementById(e);t.removeClass("cy-expand-collapse-collapsed-node"),t.removeData("position-before-collapse"),t.removeData("size-before-collapse")})),v(r(e.edgeIDListForVisible),o);var t=[];o.edges('[compound = "T"]').forEach((function(e){n.visibleGraphManager.edgesMap.has(e.data().id)||t.push(e.data().id)})),m([].concat(r(e.edgeIDListToRemove),t),o)},collapseEdges:function(e){var t=new Map;e.forEach((function(e){var o=[e.source().id(),e.target().id()].sort().join("-");t.has(o)?t.get(o).push(e.id()):t.set(o,[e.id()])})),Array.from(t.values()).forEach((function(e){if(e.length>1){var t=n.collapseEdges(e);m(e,o),x(t,o)}}))},collapseEdgesBetweenNodes:function(e){var t=[];e.forEach((function(e){t.push(e.id())}));var a=n.collapseEdgesBetweenNodes(t);m(a[0],o),x(a[1],o)},collapseAllEdges:function(){var e=n.collapseAllEdges();m(e[0],o),x(e[1],o)},expandEdges:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];e.forEach((function(e){a.push(e.id())}));var i=n.expandEdges(a,t);m(i[2],o),v(i[0],o),x(i[1],o)},expandEdgesBetweenNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];e.forEach((function(e){a.push(e.id())}));var i=n.expandEdgesBetweenNodes(a,t);m(i[2],o),v(i[0],o),x(i[1],o)},expandAllEdges:function(){var e=n.expandAllEdges();m(e[2],o),v(e[0],o),x(e[1],o)},isCollapsible:function(e){return n.isCollapsible(e.id())},isExpandable:function(e){return n.isExpandable(e.id())}},I=function(e,o){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=w(n.mainGraphManager.nodesMap.get(e));cyLayout.remove(cyLayout.elements()),cyLayout.add({group:"nodes",data:{id:e,parent:null,label:t?e:""},position:cyInvisible.getElementById(e).position()}).style({"background-color":"#CCE1F9"});var l=[];i.compoundNodes.forEach((function(e){0!=cyLayout.getElementById(e.owner.parent.ID).length?cyLayout.add({group:"nodes",data:{id:e.ID,parent:e.owner.parent.ID,label:t?e.ID:""},position:cyInvisible.getElementById(e.ID).position()}):l.push({group:"nodes",data:{id:e.ID,parent:e.owner.parent.ID,label:t?e.ID:""},position:cyInvisible.getElementById(e.ID).position()})})),l.forEach((function(e){cyLayout.add(e)})),i.simpleNodes.forEach((function(e){try{cyLayout.add({group:"nodes",data:{id:e.ID,parent:e.owner.parent.ID,label:t?e.ID:""},position:cyInvisible.getElementById(e.ID).position()})}catch(e){console.log(e)}})),r(i.edges).forEach((function(e){try{0==cyLayout.getElementById(e.source.ID).length?cyLayout.add({group:"nodes",data:{id:e.source.ID,label:t?e.source.ID:""},position:cyInvisible.getElementById(e.source.ID).position()}):0==cyLayout.getElementById(e.target.ID).length&&cyLayout.add({group:"nodes",data:{id:e.target.ID,label:t?e.target.ID:""},position:cyInvisible.getElementById(e.target.ID).position()}),cyLayout.add({group:"edges",data:{id:e.ID,source:e.source.ID,target:e.target.ID}})}catch(e){}})),cyLayout.layout({name:"fcose",randomize:!1,animate:!1}).run();var d=cyLayout.getElementById(e).boundingBox(),s=d.w,c=d.h;cyLayout.nodes().forEach((function(e){e.style("label",e.id())})),cyLayout.remove(cyLayout.elements());var u=D(o.getElementById(e));o.nodes().unselect();var p=[];if(o.nodes().forEach((function(e){if(e.id()!=u.id()&&0==e.parent().length){e.isChildless()?e.select():C(e);var n=o.collection(o.$(":selected")).boundingBox(),i=(n=a(a({},n),{},{w:e.width(),h:e.height()})).w,r=n.h;p.push({id:e.id(),data:o.$(":selected"),pos:{x:(n.x2+n.x1)/2,y:(n.y1+n.y2)/2}});var l=cyLayout.add({group:"nodes",data:{id:e.id(),label:e.id()}});l.position({x:(n.x2+n.x1)/2,y:(n.y1+n.y2)/2}),l.style({width:Math.max(i,r),height:Math.max(i,r),label:t?l.data().id:""}),o.nodes().unselect()}})),0==o.getElementById(e).parent().length){var f=cyLayout.add(o.getElementById(e).clone());f.unselect(),f.position({x:o.getElementById(e).position().x,y:o.getElementById(e).position().y}),f.style({width:Math.max(s,c)+"px",height:Math.max(s,c)+"px","background-color":"#CCE1F9",label:t?f.data().id:""})}else{var y=cyLayout.add({group:"nodes",data:{id:u.id(),label:u.id()}});y.position({x:u.position().x,y:u.position().y}),y.style({label:t?y.data().id:""}),C(u);var h=o.$(":selected");o.nodes().unselect(),cyLayout.add(h),h.forEach((function(n){n.select();var i=o.collection(o.$(":selected")).boundingBox(),r=(i=a(a({},i),{},{w:n.width(),h:n.height()})).w,l=i.h;if(n.id()!=e)n.isChildless()&&(p.push({id:n.id(),data:o.$(":selected"),pos:{x:(i.x2+i.x1)/2,y:(i.y1+i.y2)/2}}),(y=cyLayout.getElementById(n.id())).position({x:(i.x2+i.x1)/2,y:(i.y1+i.y2)/2}),y.style({width:Math.max(r,l)+"px",height:Math.max(r,l)+"px",label:t?y.data().id:""}));else{var d=cyLayout.getElementById(n.id());d.position({x:n.position().x,y:n.position().y}),d.style({width:Math.max(s,c)+"px",height:Math.max(s,c)+"px","background-color":"#CCE1F9",label:t?d.data().id:""})}o.nodes().unselect()}))}o.fit(),cyLayout.layout({name:"fcose",quality:"proof",animate:!0,animationDuration:500,randomize:!1,nodeSeparation:25,fixedNodeConstraint:[{nodeId:e,position:{x:o.$("#"+e).position("x"),y:o.$("#"+e).position("y")}}]}).run(),p.forEach((function(o){var t,n,a,i,r,l,d=cyLayout.getElementById(o.id).boundingBox(),s={x:(d.x2+d.x1)/2,y:(d.y1+d.y2)/2},c=(t=o.pos,n=s,a=o.pos,i={x:n.x-t.x,y:n.y-t.y},{x:a.x+i.x,y:a.y+i.y}),u=(r=o.pos,{x:(l=c).x-r.x,y:l.y-r.y});o.data.forEach((function(o){M(o,u,e)}))})),o.fit(),o.getElementById(e).select()};function w(e){var o={edges:new Set,simpleNodes:[],compoundNodes:[]},t=e.child;t&&t.nodes.forEach((function(e){var t=w(e);for(var n in t)o[n]=[].concat(r(o[n]||[]),r(t[n]));o.edges=new Set(o.edges),e.child?o.compoundNodes.push(e):o.simpleNodes.push(e),e.edges.forEach((function(e){return o.edges.add(e)}))}));return o}function C(e){var o=e.children();o.nonempty()&&o.forEach((function(e){e.select(),C(e)}))}function D(e){return 0!=e.parent().length?D(e.parent()):e}function M(e,o,t){e.isChildless()&&e.id()!=t?e.animate({position:{x:e.position().x+o.x,y:e.position().y+o.y}},{duration:500}):e.children().forEach((function(e){M(e,o,t)}))}return E}var c,u,p=(c=Math.max,u=Date.now||function(){return(new Date).getTime()},function(e,o,t){var n,a,i,r,d,s,p,f,y,h=0,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(o=o<0?0:+o||0,!0===t){var v=!0;g=!1}else y=l(f=t),!f||"object"!=y&&"function"!=y||(v=!!t.leading,m="maxWait"in t&&c(+t.maxWait||0,o),g="trailing"in t?!!t.trailing:g);function x(o,t){t&&clearTimeout(t),a=s=p=void 0,o&&(h=u(),i=e.apply(d,n),s||a||(n=d=void 0))}function b(){var e=o-(u()-r);e<=0||e>o?x(p,a):s=setTimeout(b,e)}function E(){x(g,s)}function I(){if(n=arguments,r=u(),d=this,p=g&&(s||!v),!1===m)var t=v&&!s;else{a||v||(h=r);var l=m-(r-h),c=l<=0||l>m;c?(a&&(a=clearTimeout(a)),h=r,i=e.apply(d,n)):a||(a=setTimeout(E,l))}return c&&s?s=clearTimeout(s):s||o===m||(s=setTimeout(b,o)),t&&(c=!0,i=e.apply(d,n)),!c||s||a||(n=d=void 0),i}return I.cancel=function(){s&&clearTimeout(s),a&&clearTimeout(a),h=0,a=s=p=void 0},I}),f=function(e,o,t){var n,a=!0;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout((function(){n=null,e.apply(i,r),a=!0}),o),a&&(t.apply(i,r),a=!1)}},y={name:"fcose",animate:!0,randomize:!1};function h(e,o,t){var n,i=e,r=function(){var e=o.scratch("_cyExpandCollapse");return e&&e.cueUtilities},d={init:function(){var e=document.createElement("canvas");e.classList.add("expand-collapse-canvas");var i=document.getElementById("cy"),r=e.getContext("2d");i.appendChild(e);var l=function(e){var o=e.getBoundingClientRect();return{top:o.top+document.documentElement.scrollTop,left:o.left+document.documentElement.scrollLeft}};function d(){var t=i.offsetWidth,n=i.offsetHeight,a=t*h.pixelRatio,r=n*h.pixelRatio;e.width=a,e.height=r,e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px"),o.trigger("cyCanvas.resize")}o.on("resize",(function(){d()})),e.setAttribute("style","position:absolute; top:0; left:0; z-index:".concat(h().zIndex,";"));var c=p((function(){e.height=o.container().offsetHeight,e.width=o.container().offsetWidth,e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=h().zIndex,setTimeout((function(){var t=l(e),n=l(i);e.style.top=-(t.top-n.top),e.style.left=-(t.left-n.left),o&&m()}),0)}),250);d();var u={};function h(){return o.scratch("cyComplexityManagement").options}function m(){var e=o.width(),t=o.height();r.clearRect(0,0,e,t),n=null}function g(e,o,t,n,a){var i=new Image(n,a);i.src=e,i.onload=function(){r.drawImage(i,o,t,n,a)}}o.on("resize",u.eCyResize=function(){c()}),o.on("expandcollapse.clearvisualcue",(function(){n&&m()}));var v=null,x=null;o.on("mousedown",u.eMouseDown=function(e){v=e.renderedPosition||e.cyRenderedPosition}),o.on("mouseup",u.eMouseUp=function(e){x=e.renderedPosition||e.cyRenderedPosition}),o.on("remove","node",u.eRemove=function(e){e.target==n&&m()}),o.on("select unselect",u.eSelect=function(){n&&m();var e=o.nodes(":selected");if(1===e.length){var a=e[0];(t.isExpandable(a)||t.isCollapsible(a))&&function(e){var t,a=e.hasClass("cy-expand-collapse-collapsed-node"),i=h().expandCollapseCueSize,l=h().expandCollapseCueLineSize;if("top-left"===h().expandCollapseCuePosition){var d=o.zoom()<1?i/(2*o.zoom()):i/2,c=parseFloat(e.css("border-width"));t={x:e.position("x")-e.width()/2-parseFloat(e.css("padding-left"))+c+d+1,y:e.position("y")-e.height()/2-parseFloat(e.css("padding-top"))+c+d+1}}else{var u=h().expandCollapseCuePosition;t="function"==typeof u?u.call(this,e):u}var p=s(t),f=((i=Math.max(i,i*o.zoom()))-(l=Math.max(l,l*o.zoom())))/2,y=p.x,m=p.y,v=y-i/2,x=m-i/2,b=i;if(a&&h().expandCueImage)g(h().expandCueImage,v,x,i,i);else if(!a&&h().collapseCueImage)g(h().collapseCueImage,v,x,i,i);else{var E=r.fillStyle,I=r.lineWidth,w=r.strokeStyle;r.fillStyle="black",r.strokeStyle="black",r.ellipse(y,m,i/2,i/2,0,0,2*Math.PI),r.fill(),r.beginPath(),r.strokeStyle="white",r.lineWidth=Math.max(2.6,2.6*o.zoom()),r.moveTo(v+f,x+i/2),r.lineTo(v+l+f,x+i/2),a&&(r.moveTo(v+i/2,x+f),r.lineTo(v+i/2,x+l+f)),r.closePath(),r.stroke(),r.strokeStyle=w,r.fillStyle=E,r.lineWidth=I}e._private.data.expandcollapseRenderedStartX=v,e._private.data.expandcollapseRenderedStartY=x,e._private.data.expandcollapseRenderedCueSize=b,n=e}(a)}}),o.on("tap",u.eTap=function(e){var i=n;if(i){var r=i.data("expandcollapseRenderedStartX"),l=i.data("expandcollapseRenderedStartY"),d=i.data("expandcollapseRenderedCueSize"),s=r+d,c=l+d,u=e.renderedPosition||e.cyRenderedPosition,p=u.x,f=u.y,g=h(),b=(g.expandCollapseCueSensitivity-1)/2;Math.abs(v.x-x.x)<5&&Math.abs(v.y-x.y)<5&&p>=r-d*b&&p<=s+d*b&&f>=l-d*b&&f<=c+d*b&&(y=null!=g.layoutBy?a({},g.layoutBy):null,t.isCollapsible(i)?(m(),t.collapseNodes([i]),null!=y&&o.layout(y).run()):t.isExpandable(i)&&(m(),t.expandNodes([i],!1,!0),setTimeout((function(){null!=y&&o.layout(y).run()}),700)))}}),o.on("afterUndo afterRedo",u.eUndoRedo=u.eSelect),o.on("position","node",u.ePosition=f(u.eSelect,100,m)),o.on("pan zoom",u.ePosition),u.hasEventFields=!0,function(e){var t=o.scratch("_cyExpandCollapse");null==t&&(t={}),t.cueUtilities=e,o.scratch("_cyExpandCollapse",t)}(u)},unbind:function(){var e=r();e.hasEventFields?(o.trigger("expandcollapse.clearvisualcue"),o.off("mousedown","node",e.eMouseDown).off("mouseup","node",e.eMouseUp).off("remove","node",e.eRemove).off("tap","node",e.eTap).off("add","node",e.eAdd).off("position","node",e.ePosition).off("pan zoom",e.ePosition).off("select unselect",e.eSelect).off("free","node",e.eFree).off("resize",e.eCyResize).off("afterUndo afterRedo",e.eUndoRedo)):console.log("events to unbind does not exist")},rebind:function(){var e=r();e.hasEventFields?o.on("mousedown","node",e.eMouseDown).on("mouseup","node",e.eMouseUp).on("remove","node",e.eRemove).on("tap","node",e.eTap).on("add","node",e.eAdd).on("position","node",e.ePosition).on("pan zoom",e.ePosition).on("select unselect",e.eSelect).on("free","node",e.eFree).on("resize",e.eCyResize).on("afterUndo afterRedo",e.eUndoRedo):console.log("events to rebind does not exist")}},s=function(e){var t=o.pan(),n=o.zoom();return{x:e.x*n+t.x,y:e.y*n+t.y}};if(d[i])return d[i].apply(o.container(),Array.prototype.slice.call(arguments,1));if("object"==l(i)||!i)return d.init.apply(o.container(),arguments);throw new Error("No such function `"+i+"` for cytoscape.js-expand-collapse")}function m(e){function o(e,o){void 0===e.scratch("cyComplexityManagement")&&e.scratch("cyComplexityManagement",{});var t=e.scratch("cyComplexityManagement");return void 0===o?t:t[o]}function t(e,t,n){o(e)[t]=n}e("core","complexityManagement",(function(e){var n=this,a={layoutBy:null,filterRule:function(e){return!1},cueEnabled:!0,expandCollapseCuePosition:"top-left",expandCollapseCueSize:12,expandCollapseCueLineSize:8,expandCueImage:void 0,collapseCueImage:void 0,expandCollapseCueSensitivity:1,zIndex:999};if("get"!==e){a=function(e,o){var t={};for(var n in e)t[n]=e[n];for(var n in o)t.hasOwnProperty(n)&&(t[n]=o[n]);return t}(a,e);var i=s(n),r=new Map;t(n,"options",a),t(n,"api",i),t(n,"removedEles",r),h(a,n,i)}return o(n,"api")})),window.cyLayout=e({style:[{selector:"node",style:{label:function(e){return e.data("label")},color:"black","font-size":"20px","compound-sizing-wrt-labels":"include",height:40,width:40,padding:"5px","background-fit":"cover","border-color":"black","border-width":1,"border-opacity":1}},{selector:"edge",style:{label:function(e){return e.data("weight")},"curve-style":"bezier","target-arrow-shape":"triangle","text-rotation":"autorotate",width:"1.5px","text-margin-y":"10px","line-color":"black","target-arrow-color":"black"}}],headless:!0,styleEnabled:!0}),window.cyVisible=e({headless:!0,styleEnabled:!0}),window.cyInvisible=e({headless:!0,styleEnabled:!0})}void 0!==window.cytoscape&&m(window.cytoscape);export{m as default};
